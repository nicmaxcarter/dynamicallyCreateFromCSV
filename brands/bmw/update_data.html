<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="cache-control" content="no-cache" />
    <link rel="stylesheet" type="text/css" href="../../css/styles.css?v=1.5">
    <script src="../../js/update-scripts.js?v=12"></script>
</head>

<body>

    <div class="main">
        <div class="flex-row">
            <div class="flex-column left">
                <!-- pull the brand name from the current directory name -->
                <h1 class="header case">Update <span id="brand-name-span"></span></h1>
            </div>
            <div class="flex-column right">
                <div class="sub-flex">
                    <form id="get-template" method="get" action="./data.csv">
                        <button name="back" class="medium" type="submit">Download Current Data File</button>
                    </form>
                    <a href="./service-images.html">
                        <button name="back" class="back">Cancel</button>
                    </a>    
                </div>
            </div>
        </div>

        <hr>
        <br />

        <div class="flex-row">
            <div class="content-main data full">

                <!-- Title ------------>
                <h2 class="case">Data File</h2>

                <form>

                    <!-- The file to upload -->
                    <p>
                        <label for="file-id" class="label-btn large">Select File<span id="file-span"></span></label>
                        
                        <!-- this will be hidden for styling purposes -->
                        <input id="file-id" type="file" name="data-file" class="inputfile" />

                        <input type="text" id="file-name" name="file-input" placeholder="File Name" readonly><br>

                    </p>

                </form>

                <!-- Placeholders for messages set by event handlers -->
                <p id="upload-status"></p>
                <p id="progress"></p>
                <pre id="result"></pre>
            </div>
        </div>

        <div class="flex-row">
            <div class="content-main brand no-shadow"></div>

            <div id="button-flex-row" class="content-main data no-shadow">

                <button name="back" class="back" id="upload-button-id"><b>Submit Brand</b></button>
                <a href="../../index.html">
                    <button id="return-home-btn" class="submit hidden"><b>Return to Brands</b></button>
                </a>
            </div>

        </div>


        <script>

            // Set specified span to the current directory brand name
            document.getElementById('brand-name-span').innerHTML = getBrand();

            initFileOnlyAjaxUpload();

            // Once a file is selected, change the specified text the filename
            var input = document.getElementById('file-id');
            input.onchange = function (e) {
                var name = this.value;
                name = name.replace(/.*[\/\\]/, '');
                var span = document.getElementById('file-name');
                span.setAttribute('placeholder', name);
            }

            // Retrieve name of the current directory
            function getBrand() {
                var loc = window.location.pathname;
                paths = loc.split('/');
                paths.pop();
                return paths.pop();
            }

        </script>
</body>

</html>